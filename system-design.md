# System Design

- 设置数据库字段的默认值的时候，最好把默认值和业务值区分开，
- 数据库不要使用空值比如 0 作为业务值，在 python 里做判断的时候碰到了想判断用户是否传上来了值，但是传的是0的问题

## 思考

- 一个无限的嵌套评论 B+ 树
- 短信发送放刷新机制

### 分布式的id 设计

- 使用int64的id：时间戳(41) + 数据中心id(5) + 机器id(5) + 序列id(12) 这样每台机器每毫秒产生 2^12 次方个 id
- 插入时想获得自己的机器id有两个方法：1. mysql 查一下前一次的插入id，持久化到本地。2. 部署的时候使用脚本替换掉这个 id